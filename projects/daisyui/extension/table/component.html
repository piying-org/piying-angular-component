<ng-template #templateRef let-attr="attributes">
  <div class="overflow-x-auto">
    <table class="table">
      <thead>
        <tr>
          @for (item of defineList(); track $index) {
            <ng-template #thTemp>
              <ng-container
                [selectlessOutlet]="StrOrTemplateComponent"
                [selectlessOutletInputs]="selectorlessInput | pure: item.head"
              ></ng-container>
            </ng-template>
            @if (isSchema | pure: item.head) {
              <ng-container *ngTemplateOutlet="thTemp"></ng-container>
            } @else {
              <th>
                <ng-container *ngTemplateOutlet="thTemp"></ng-container>
              </th>
            }
          }
        </tr>
      </thead>
      <tbody>
        @for (item of list$$(); track $index) {
          @let itemData = getItemData | pure: $index : item;
          <tr>
            @for (define of defineList(); track $index) {
              <ng-template #itemTemp>
                <ng-container
                  [selectlessOutlet]="StrOrTemplateComponent"
                  [selectlessOutletInputs]="
                    selectorlessInput
                      | pure
                        : ((isFunction | pure: define.body)
                            ? ($any(define).body | pure: item)
                            : define.body)
                        : { item$: itemData }
                  "
                ></ng-container>
              </ng-template>

              @let itemDefine =
                (isFunction | pure: define.body) ? ($any(define).body | pure: item) : define.body;
              @if (isSchema | pure: itemDefine) {
                <ng-container *ngTemplateOutlet="itemTemp"></ng-container>
              } @else {
                <td>
                  <ng-container *ngTemplateOutlet="itemTemp"></ng-container>
                </td>
              }
            }
          </tr>
        }
      </tbody>
      <tfoot>
        @for (item of defineList(); track $index) {
          <ng-template #tdTemp>
            <ng-container
              [selectlessOutlet]="StrOrTemplateComponent"
              [selectlessOutletInputs]="selectorlessInput | pure: item.foot"
            ></ng-container>
          </ng-template>
          @if (isSchema | pure: item.foot) {
            <ng-container *ngTemplateOutlet="tdTemp"></ng-container>
          } @else {
            <td>
              <ng-container *ngTemplateOutlet="tdTemp"></ng-container>
            </td>
          }
        }
      </tfoot>
    </table>
  </div>
  @if (pagination()?.enable) {
    <div class="flex items-center gap-2">
      @if (pagination()?.sizeOptions; as sizeOptions) {
        <select
          class="select w-20"
          [ngModel]="page().size"
          (ngModelChange)="pageSizeChange($event)"
        >
          @for (item of sizeOptions; track $index) {
            <option [ngValue]="item">
              {{
                pagination()?.optionsLabel
                  ? (pagination()!.optionsLabel! | pure: item : page().index : count$$())
                  : item
              }}
            </option>
          }
        </select>
      }
      <div class="join">
        <button class="join-item btn" [disabled]="page().index === 0" (click)="gotoPage(0)">
          «
        </button>
        @for (item of pageRange$$(); track $index) {
          @if (item.type === 'go') {
            <input
              class="join-item btn btn-square"
              type="radio"
              name="options"
              [aria-label]="item.value + 1"
              [checked]="item.value === page().index"
              (click)="gotoPage(item.value)"
            />
          } @else if (item.type === 'prev') {
            <button class="join-item btn" (click)="gotoPage(page().index - 5)"><</button>
          } @else if (item.type === 'next') {
            <button class="join-item btn" (click)="gotoPage(page().index + 5)">></button>
          }
        }
        <button
          class="join-item btn"
          [disabled]="page().index === maxPageCount$$() - 1"
          (click)="gotoPage(maxPageCount$$() - 1)"
        >
          »
        </button>
      </div>
    </div>
  }
</ng-template>
