<ng-template #refTemp let-item>
  @if (isString | pure: item) {
    {{ item }}
  } @else {
    <ng-container *ngTemplateOutlet="item"></ng-container>
  }
</ng-template>

<ng-template #templateRef let-attr="attributes">
  <label
    [attributes]="attr()"
    [excludes]="['class']"
    [class]="attr()?.class"
    class="{{ 'swap' | cssPrefix }}"
  >
    <input
      type="checkbox"
      [ngModel]="value$()"
      (ngModelChange)="valueChange($event)"
      [disabled]="disabled$()"
    />
    <div [class]="'swap-on' | cssPrefix">
      <ng-container *ngTemplateOutlet="refTemp; context: { $implicit: onRef }"></ng-container>
    </div>
    <div [class]="'swap-off' | cssPrefix">
      <ng-container *ngTemplateOutlet="refTemp; context: { $implicit: offRef }"></ng-container>
    </div>
  </label>
</ng-template>
